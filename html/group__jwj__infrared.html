<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BLE IR Remote: IR Functions</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">BLE IR Remote
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Bluetooth LE enabled multi-remote controller.</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__jwj__infrared.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">IR Functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for sending IR codes.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr class="memitem:ga42ad2dbdd6cb97ef1a3ca646eb153728"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga42ad2dbdd6cb97ef1a3ca646eb153728">IR_HIGH</a>&#160;&#160;&#160;TCCR0A |= (1&lt;&lt; COM0B1)</td></tr>
<tr class="memitem:ga7c235b14736eef26dd8cec5c274c08dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga7c235b14736eef26dd8cec5c274c08dc">IR_LOW</a>&#160;&#160;&#160;TCCR0A &amp;= ~(1&lt;&lt; COM0B1)</td></tr>
<tr class="memitem:ga51bb812ee93ec161c09b1e8fcddf0e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga51bb812ee93ec161c09b1e8fcddf0e4d">OCR0A_VALUE</a>&#160;&#160;&#160;53</td></tr>
<tr class="memitem:gab7919e01e1cfe27c93b51917d1501978"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#gab7919e01e1cfe27c93b51917d1501978">OCR0B_VALUE</a>&#160;&#160;&#160;18</td></tr>
<tr class="memitem:gaa9fe7ae368a06503001c4e9303cb93c9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#gaa9fe7ae368a06503001c4e9303cb93c9">PRESCALER_FLAGS</a>&#160;&#160;&#160;(1&lt;&lt; CS01)</td></tr>
<tr class="memitem:ga26f53b7361e8f4529b048dfa1237908a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga26f53b7361e8f4529b048dfa1237908a">TRIM</a>&#160;&#160;&#160;300</td></tr>
<tr class="memitem:gaaa97f6f10e20a14cfa263886815d82d1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#gaaa97f6f10e20a14cfa263886815d82d1">IRSENSOR_PIN</a>&#160;&#160;&#160;PINB</td></tr>
<tr class="memitem:ga520087114fe963e4e98974d2b741b427"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga520087114fe963e4e98974d2b741b427">IRSENSOR_BIT</a>&#160;&#160;&#160;PB2</td></tr>
<tr class="memitem:ga7302231f8485e64ea42e2e726075b6ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga7302231f8485e64ea42e2e726075b6ee">MAXPULSE</a>&#160;&#160;&#160;2500</td></tr>
<tr class="memitem:ga3ecb79b8336bbd045b42b9176e3f1123"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga3ecb79b8336bbd045b42b9176e3f1123">TICK_DURATION</a>&#160;&#160;&#160;10</td></tr>
<tr class="memitem:ga18d3e58d384a520f164f80a44d5a7e08"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga18d3e58d384a520f164f80a44d5a7e08">TIMEOUT_COUNT</a>&#160;&#160;&#160;200</td></tr>
<tr class="memitem:gad6d455c1130ca455b3cf81f2fb01403f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#gad6d455c1130ca455b3cf81f2fb01403f">TICK_OCR</a>&#160;&#160;&#160;0xA0</td></tr>
<tr class="memitem:gadf5a3067e00699dd58fecd3940362917"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#gadf5a3067e00699dd58fecd3940362917">TICK_PRESCALER</a>&#160;&#160;&#160;(1&lt;&lt; CS00)</td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gab42c336f60f1c807ab3099b7c4d48f64"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#gab42c336f60f1c807ab3099b7c4d48f64">IRError</a> { <br/>
&#160;&#160;<a class="el" href="group__jwj__infrared.html#ggab42c336f60f1c807ab3099b7c4d48f64acd8120817dbfbbfe6966830316bf9cc0">IRError_NoError</a> =  0, 
<a class="el" href="group__jwj__infrared.html#ggab42c336f60f1c807ab3099b7c4d48f64aa2b590e6d122d91766177002d5349cd9">IRError_SigTooLong</a> =  1, 
<a class="el" href="group__jwj__infrared.html#ggab42c336f60f1c807ab3099b7c4d48f64af25811f4ce086a3a480c186b4b869bbc">IRError_NoSignal</a> =  2, 
<a class="el" href="group__jwj__infrared.html#ggab42c336f60f1c807ab3099b7c4d48f64af2fb21c7c7064aea4848977e2eeeb604">IRError_HighPulseTooLong</a> =  3, 
<br/>
&#160;&#160;<a class="el" href="group__jwj__infrared.html#ggab42c336f60f1c807ab3099b7c4d48f64a64c1d57fdfeecdd998cab6b469f2d3ce">IRError_LowPulseTooLong</a> =  4
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa6e4c3e75b86ccd24c9e815d7dd53cfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#gaa6e4c3e75b86ccd24c9e815d7dd53cfb">sendPulseD</a> (double highTime, double lowTime)</td></tr>
<tr class="memitem:ga0f861d99f6a01ff6d011c30dd8e15787"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga0f861d99f6a01ff6d011c30dd8e15787">sendPulse</a> (uint8_t highTime, uint8_t lowTime)</td></tr>
<tr class="memitem:ga607d10b247d3ef3957a029dff92cca1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga607d10b247d3ef3957a029dff92cca1e">sendNECByte</a> (uint8_t data)</td></tr>
<tr class="memitem:gaa93d02f9f48cf317a4d2d9410a240c9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#gaa93d02f9f48cf317a4d2d9410a240c9f">sendNECCommand</a> (uint8_t data)</td></tr>
<tr class="memitem:ga3ef44fa7f9e2694386cefa711bbefa96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga3ef44fa7f9e2694386cefa711bbefa96">sendSequence</a> (unsigned char *data)</td></tr>
<tr class="memitem:ga3fc8699debb6da1fce7cc7c1043484c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga3fc8699debb6da1fce7cc7c1043484c4">initIR</a> ()</td></tr>
<tr class="memitem:ga329f8f0f862a6aa59f4f3ecf3675f92e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__jwj__infrared.html#gab42c336f60f1c807ab3099b7c4d48f64">IRError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwj__infrared.html#ga329f8f0f862a6aa59f4f3ecf3675f92e">learnIR</a> (unsigned char data[])</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &quot;infrared.h&quot;</span> 
</pre></div><p>IR Functions</p>
<p>These functions send the IR codes as sequences of on-off pulses.</p>
<p>Timer0 is used to generate a 38 kHz PWM signal with a duty cycle of 1/3 on the OC0B (PD5) pin.</p>
<p>Calculate the correct OCR0A and prescaler values at <a href="http://www.et06.dk/atmega_timers/">http://www.et06.dk/atmega_timers/</a>. </p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="group__jwj__infrared.html#ga51bb812ee93ec161c09b1e8fcddf0e4d">OCR0A_VALUE</a> </dd>
<dd>
<a class="el" href="group__jwj__infrared.html#gab7919e01e1cfe27c93b51917d1501978">OCR0B_VALUE</a></dd></dl>
<dl class="section author"><dt>Author:</dt><dd>Jens Willy Johannsen <a href="#" onclick="location.href='mai'+'lto:'+'jen'+'s@'+'jen'+'sw'+'ill'+'y.'+'dk'; return false;">jens@<span style="display: none;">.nosp@m.</span>jens<span style="display: none;">.nosp@m.</span>willy<span style="display: none;">.nosp@m.</span>.dk</a> <a href="http://atomslagstyrken.dk/arduino">http://atomslagstyrken.dk/arduino</a> </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga42ad2dbdd6cb97ef1a3ca646eb153728"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#ga42ad2dbdd6cb97ef1a3ca646eb153728">IR_HIGH</a>&#160;&#160;&#160;TCCR0A |= (1&lt;&lt; COM0B1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Macros for switching PWM output on – i.e. setting the IR pulse <em>high</em>. </p>

</div>
</div>
<a class="anchor" id="ga7c235b14736eef26dd8cec5c274c08dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#ga7c235b14736eef26dd8cec5c274c08dc">IR_LOW</a>&#160;&#160;&#160;TCCR0A &amp;= ~(1&lt;&lt; COM0B1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Macros for switching PWM output off – i.e. setting the IR pulse <em>low</em>. </p>

</div>
</div>
<a class="anchor" id="ga520087114fe963e4e98974d2b741b427"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#ga520087114fe963e4e98974d2b741b427">IRSENSOR_BIT</a>&#160;&#160;&#160;PB2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The Pxy used for reading the IR input signal. Configure this to match your hardware setup. Obviously, the bit should match the PINx used. </p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="group__jwj__infrared.html#gaaa97f6f10e20a14cfa263886815d82d1">IRSENSOR_PIN</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gaaa97f6f10e20a14cfa263886815d82d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#gaaa97f6f10e20a14cfa263886815d82d1">IRSENSOR_PIN</a>&#160;&#160;&#160;PINB</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The PINx used for reading the IR input signal. Configure this to match your hardware setup. </p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="group__jwj__infrared.html#gaaa97f6f10e20a14cfa263886815d82d1">IRSENSOR_PIN</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga7302231f8485e64ea42e2e726075b6ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#ga7302231f8485e64ea42e2e726075b6ee">MAXPULSE</a>&#160;&#160;&#160;2500</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Maximum number of ticks (one tick equals TICK_DURATION µs for either a HIGH or LOW pulse. </p>

</div>
</div>
<a class="anchor" id="ga51bb812ee93ec161c09b1e8fcddf0e4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#ga51bb812ee93ec161c09b1e8fcddf0e4d">OCR0A_VALUE</a>&#160;&#160;&#160;53</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the TOP value for the 8 bit Timer0 for a PWM frequency of 38 kHz (or as close as possible. Values can be calculated here: <a href="http://www.et06.dk/atmega_timers/">http://www.et06.dk/atmega_timers/</a> </p>

</div>
</div>
<a class="anchor" id="gab7919e01e1cfe27c93b51917d1501978"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#gab7919e01e1cfe27c93b51917d1501978">OCR0B_VALUE</a>&#160;&#160;&#160;18</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the OCR value for duty cycle. This should be about 1/3 of the OCR0A value. </p>

</div>
</div>
<a class="anchor" id="gaa9fe7ae368a06503001c4e9303cb93c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#gaa9fe7ae368a06503001c4e9303cb93c9">PRESCALER_FLAGS</a>&#160;&#160;&#160;(1&lt;&lt; CS01)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Define the prescaler flags to match the OCR0A value for a PWM frequency of 38 kHz. Values can be calculated here: <a href="http://www.et06.dk/atmega_timers/">http://www.et06.dk/atmega_timers/</a> </p>

</div>
</div>
<a class="anchor" id="ga3ecb79b8336bbd045b42b9176e3f1123"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#ga3ecb79b8336bbd045b42b9176e3f1123">TICK_DURATION</a>&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sample period length in microseconds. At every tick the IR input signal is sampled. This must correspond to the <a class="el" href="group__jwj__infrared.html#gad6d455c1130ca455b3cf81f2fb01403f">TICK_OCR</a> value. </p>

</div>
</div>
<a class="anchor" id="gad6d455c1130ca455b3cf81f2fb01403f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#gad6d455c1130ca455b3cf81f2fb01403f">TICK_OCR</a>&#160;&#160;&#160;0xA0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Output compare value for the 8 bit Timer0 to match the TICK_DURATION. Values can be calculated here: <a href="http://www.et06.dk/atmega_timers/">http://www.et06.dk/atmega_timers/</a> </p>

</div>
</div>
<a class="anchor" id="gadf5a3067e00699dd58fecd3940362917"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#gadf5a3067e00699dd58fecd3940362917">TICK_PRESCALER</a>&#160;&#160;&#160;(1&lt;&lt; CS00)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Prescaler for the TICK_OCR value to match the TICK_DURATION. </p>

</div>
</div>
<a class="anchor" id="ga18d3e58d384a520f164f80a44d5a7e08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#ga18d3e58d384a520f164f80a44d5a7e08">TIMEOUT_COUNT</a>&#160;&#160;&#160;200</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of MAXPULSE durations allowed until timeout occurs. This is used when waiting for the initial signal. If a time equal to TIMEOUT_COUNT * MAXPULSE * TICK_DURATION microseconds passes, a timeout occurs. </p>

</div>
</div>
<a class="anchor" id="ga26f53b7361e8f4529b048dfa1237908a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__jwj__infrared.html#ga26f53b7361e8f4529b048dfa1237908a">TRIM</a>&#160;&#160;&#160;300</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The trim value is a number that is <em>subtracted</em> from the specified time durations in order to compensate for the extra CPU cycles used in control loops etc. This value is really best determined by measuring the on/off times on an oscilloscope and adjusting the value (higher values = shorter durations) until the measured duration matches the specified duration. Nominally, the value is in microseconds. </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="gab42c336f60f1c807ab3099b7c4d48f64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__jwj__infrared.html#gab42c336f60f1c807ab3099b7c4d48f64">IRError</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Error codes for the <a class="el" href="group__jwj__infrared.html#ga329f8f0f862a6aa59f4f3ecf3675f92e">learnIR()</a> function </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggab42c336f60f1c807ab3099b7c4d48f64acd8120817dbfbbfe6966830316bf9cc0"></a>IRError_NoError</em>&nbsp;</td><td>
<p>No error - operation suceeded </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggab42c336f60f1c807ab3099b7c4d48f64aa2b590e6d122d91766177002d5349cd9"></a>IRError_SigTooLong</em>&nbsp;</td><td>
<p>The signal length exceeds 64 byte pairs and so cannot fit in the 128 byte data buffer </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggab42c336f60f1c807ab3099b7c4d48f64af25811f4ce086a3a480c186b4b869bbc"></a>IRError_NoSignal</em>&nbsp;</td><td>
<p>No signal was detected </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggab42c336f60f1c807ab3099b7c4d48f64af2fb21c7c7064aea4848977e2eeeb604"></a>IRError_HighPulseTooLong</em>&nbsp;</td><td>
<p>A HIGH pulse duration exceeded 25 ms </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggab42c336f60f1c807ab3099b7c4d48f64a64c1d57fdfeecdd998cab6b469f2d3ce"></a>IRError_LowPulseTooLong</em>&nbsp;</td><td>
<p>A LOW pulse duration exceeded 25 ms </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga3fc8699debb6da1fce7cc7c1043484c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__jwj__infrared.html#ga3fc8699debb6da1fce7cc7c1043484c4">initIR</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes Timer0 for 38 kHz PWM. </p>
<dl class="section note"><dt>Note:</dt><dd>Pin OC0B (PD5) is configured as output and used for the PWM signal. </dd></dl>

</div>
</div>
<a class="anchor" id="ga329f8f0f862a6aa59f4f3ecf3675f92e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__jwj__infrared.html#gab42c336f60f1c807ab3099b7c4d48f64">IRError</a> <a class="el" href="group__jwj__infrared.html#ga329f8f0f862a6aa59f4f3ecf3675f92e">learnIR</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>data</em>[]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reads an IR code and stores the on-off time pairs in the specified data buffer.</p>
<p>The signal will be stored as byte pairs where the first byte is ON time in 0.1 ms and the second byte is OFF time in 0.1 ms. The sequence is terminated by a 0x00 byte.</p>
<p>If the signal length exceeds 128 bytes, an <a class="el" href="group__jwj__infrared.html#ggab42c336f60f1c807ab3099b7c4d48f64aa2b590e6d122d91766177002d5349cd9">IRError_SigTooLong</a> is returned. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>A pointer to 128 bytes large memory block for storing the recorded IR signal. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>0 if a valid signal was recorded. Otherwise a <a class="el" href="group__jwj__infrared.html#gab42c336f60f1c807ab3099b7c4d48f64">IRError</a> value is returned. </dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>A valid signal was recorded and stored in the data buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga607d10b247d3ef3957a029dff92cca1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__jwj__infrared.html#ga607d10b247d3ef3957a029dff92cca1e">sendNECByte</a> </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends a NEC1 byte.  </p>

</div>
</div>
<a class="anchor" id="gaa93d02f9f48cf317a4d2d9410a240c9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__jwj__infrared.html#gaa93d02f9f48cf317a4d2d9410a240c9f">sendNECCommand</a> </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends a NEC1 command byte.</p>
<p>Sends the byte followed by the inverted byte.  </p>

</div>
</div>
<a class="anchor" id="ga0f861d99f6a01ff6d011c30dd8e15787"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__jwj__infrared.html#ga0f861d99f6a01ff6d011c30dd8e15787">sendPulse</a> </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>highTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>lowTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends an on-off pulse. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">highTime</td><td>Time in 100 µs for the <em>ON</em> part of the pulse. </td></tr>
    <tr><td class="paramname">lowTime</td><td>Time in 100 µs for the <em>OFF</em> part of the pulse.</td></tr>
  </table>
  </dd>
</dl>
<p>This method uses byte integer parameters for the time specification. The times are in 100 µs. Thus, a value of 16 will translate to 1.6 ms. Maximum duration for either on or off is 25.5 ms.</p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="group__jwj__infrared.html#gaa6e4c3e75b86ccd24c9e815d7dd53cfb">sendPulseD</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gaa6e4c3e75b86ccd24c9e815d7dd53cfb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__jwj__infrared.html#gaa6e4c3e75b86ccd24c9e815d7dd53cfb">sendPulseD</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>highTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lowTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends an on-off pulse. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">highTime</td><td>Time in milliseconds for the <em>ON</em> part of the pulse. </td></tr>
    <tr><td class="paramname">lowTime</td><td>Time in milliseconds for the <em>OFF</em> part of the pulse.</td></tr>
  </table>
  </dd>
</dl>
<p>This method uses <code>double</code> parameters for the time specification. </p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="group__jwj__infrared.html#ga0f861d99f6a01ff6d011c30dd8e15787">sendPulse</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga3ef44fa7f9e2694386cefa711bbefa96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__jwj__infrared.html#ga3ef44fa7f9e2694386cefa711bbefa96">sendSequence</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends a IR pulse sequence</p>
<p>The IR data passed in the <code>data</code> parameter must consist of an array of byte pairs terminated by 0x00. The first byte is ON time in 0.1 ms and the second byte is the OFF time in 0.1 ms.</p>
<p>Since the array consists of byte pairs terminated by a single 0x00 byte, the length will be an uneven number (although an extra 0x00 will make no difference).</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>A pointer to a 0x00 terminated array of byte pairs consisting of ON and OFF time values in 0.1 ms. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="group__jwj__infrared.html#ga26f53b7361e8f4529b048dfa1237908a">TRIM</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Wed May 9 2012 23:39:28 for BLE IR Remote by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
